import random
import time

import discord
from discord.ext import commands

from main import bot
from user_data_commands import change_balance, get_balance


class other_commands(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    # –î–∞–ª–µ–µ –∏–¥—ë—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
    # –ö–æ–º–∞–Ω–¥–∞ roll –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Ç–æ–π —á—Ç–æ –≤ –î–æ—Ç–µ 2
    @commands.command()
    async def roll(self, ctx, *args):
        if len(args) == 0:
            await ctx.send(random.randint(0, 100))
        elif len(args) == 1:
            await ctx.send(random.randint(0, int(args[0])))
        elif len(args) == 2:
            await ctx.send(random.randint(int(args[0]), int(args[1])))

    @commands.command()
    async def flip(self, ctx):
        await ctx.send(random.choice(["–û—Ä—ë–ª", "–†–µ—à–∫–∞"]))

    @commands.command()
    async def join(self, ctx):
        voice = discord.utils.get(bot.voice_clients, guild=ctx.guild)
        if voice and voice.is_connected():
            await ctx.send("–Ø —É–∂–µ –∑–∞—à—ë–ª –Ω–∞ –∫–∞–Ω–∞–ª")
        else:
            channel = ctx.author.voice.channel
            await channel.connect()

    @commands.command()
    async def leave(self, ctx):
        voice = discord.utils.get(bot.voice_clients, guild=ctx.guild)
        if voice:
            if voice.is_connected():
                await voice.disconnect()
        else:
            await ctx.send("–Ø –Ω–µ –Ω–∞—Ö–æ–∂—É—Å—å –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–º –∫–∞–Ω–∞–ª–µ")

    @commands.command()
    async def ping(self, ctx):
        """ Pong! """
        before = time.monotonic()
        #before_ws = int(round(bot.latency * 1000, 1))
        message = await ctx.send("üèì –ü–æ–Ω–≥")
        ping = (time.monotonic() - before) * 1000
        await message.edit(content=f"üèì –ü–∏–Ω–≥: {int(ping)}")

    @commands.command()
    async def help_aic(self, ctx):
        await ctx.send("–£ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞, –ø—Ä–µ—Ñ–∏–∫—Å // \n"
                       "–°–∞–º–∏ –∫–æ–º–∞–Ω–¥—ã: \n"
                       "extract_audio [—Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ —Å youtube] - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É –∏–∑ –≤–∏–¥–µ–æ –Ω–∞ —é—Ç—É–±–µ –∏ —Å–∫–∏–¥—ã–≤–∞–µ—Ç –µ—ë –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª. \n"
                       "play [—Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ —Å youtube] - –ò–≥—Ä–∞–µ—Ç –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É –∏–∑ –≤–∏–¥–µ–æ, –≤ —Ç–æ–º –≥–æ–ª–æ—Å–æ–≤–æ–º –∫–∞–Ω–∞–ª–µ –≥–¥–µ –±—ã–ª —á–µ–ª–æ–≤–µ–∫ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–∑–≤–∞–ª –±–æ—Ç–∞ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–æ–π. \n"
                       "play_file [–ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª] - –ò–≥—Ä–∞–µ—Ç –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É –∏–∑ –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.\n"
                       "pause - –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç, –Ω–æ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∏. \n"
                       "resume - –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∏, –µ—Å–ª–∏ –æ–Ω–æ –±—ã–ª–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π pause. \n"
                       "stop - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∏. \n"
                       "ping - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –≤–∞–º–∏ –∏ –±–æ—Ç–æ–º \n"
                       "join - –ø—Ä–∏–∑—ã–≤–∞–µ—Ç –±–æ—Ç–∞ –Ω–∞ –∫–∞–Ω–∞–ª –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —á–µ–ª–æ–≤–µ–∫ –ø–∏—Å–∞–≤—à–∏–π —ç—Ç—É –∫–æ–º–∞–Ω–¥—É \n"
                       "leave - –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –±–æ—Ç–∞ —Å –∫–∞–Ω–∞–ª–∞ \n"
                       "roll - [*–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, *–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ] - –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å roll, –±—É–¥–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–æ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 100.\n"
                       "flip - –ü–æ–¥–∫–∏–Ω—É—Ç—å –º–æ–Ω–µ—Ç–∫—É.\n"
                       "slot - –°—ã–≥—Ä–∞—Ç—å –≤ —Å–ª–æ—Ç –º–∞—à–∏–Ω—É.\n")

    @commands.command()
    async def slot(self, ctx):
        """ Roll the slot machine """
        emojis = "üçéüçäüçêüçãüçâüçáüçìüçí"
        a = random.choice(emojis)
        b = random.choice(emojis)
        c = random.choice(emojis)

        slotmachine = f"**[ {a} {b} {c} ]\n{ctx.author.name}**,"

        if (a == b == c):
            change_balance(ctx, get_balance(ctx) + 2)
            await ctx.send(f"{slotmachine} –í—Å—ë —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –≤—ã –ø–æ–±–µ–¥–∏–ª–∏! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 2 –æ—á–∫–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å //balance üéâ")
        elif (a == b) or (a == c) or (b == c):
            change_balance(ctx,get_balance(ctx)+1)
            await ctx.send(f"{slotmachine} 2 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ —Ä—è–¥—É, –≤—ã –ø–æ–±–µ–¥–∏–ª–∏! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 1 –æ—á–∫–æ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å //balance üéâ")
        else:
            await ctx.send(f"{slotmachine} –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ üò¢")


def setup(bot):
    bot.add_cog(other_commands(bot))
